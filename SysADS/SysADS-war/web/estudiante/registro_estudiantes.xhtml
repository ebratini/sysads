<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">

    <body>

        <ui:composition template="/resources/templates/estudiantes_master_template.xhtml">

            <ui:define name="title">
                SysADS - Registro Datos Estudiantes
            </ui:define>

            <ui:define name="content">
                <h:form>
                    <p:growl id="growl" sticky="true" showDetail="true"/>

                    <p:wizard widgetVar="reg_est_wiz" flowListener="#{estudianteWizardController.onFlowProcess}">
                        <p:tab id="cu" title="Cuenta Usuario">
                            <p:panel header="Cuenta de Usuario">
                                <h:messages errorClass="error"/>
                                <p:fieldset legend="Login">
                                    <h:panelGrid columns="2">  
                                        <h:outputLabel for="nombre_usuario" value="Nombre Usuario:* " />
                                        <p:inputText id="nombre_usuario" value="#{estudianteWizardController.usuario.usrLogin}" label="Nombre Usuario" required="true" />

                                        <h:outputLabel for="email" value="Email:* " />  
                                        <p:inputText id="email" value="#{estudianteWizardController.usuario.usrEmail}" label="Email" required="true" />
                                    </h:panelGrid>
                                </p:fieldset>
                                <p:spacer height="10" />
                                <p:fieldset legend="Configuracion de Seguridad">
                                    <h:panelGrid columns="2">  
                                        <h:outputLabel for="password" value="Password:* " />  
                                        <p:password id="password" value="#{estudianteWizardController.usuario.usrPassword}" required="true" label="Password 1" feedback="true" match="confirm_pass"/>

                                        <h:outputLabel for="confirm_pass" value="Confirmar Password: " />  
                                        <p:password id="confirm_pass" label="Password 2" required="true"/>

                                        <h:outputText value="Vigencia Password: " />  
                                        <p:selectOneMenu value="#{estudianteWizardController.usuario.usrVigenciaPassword}" label="Vigencia Password">  
                                            <f:selectItem itemLabel="1 Mes" itemValue="1" />  
                                            <f:selectItem itemLabel="2 Meses" itemValue="2" />  
                                            <f:selectItem itemLabel="3 Meses" itemValue="3" />  
                                            <f:selectItem itemLabel="4 Meses" itemValue="4" />
                                            <f:selectItem itemLabel="5 Meses" itemValue="5" />  
                                            <f:selectItem itemLabel="6 Meses" itemValue="6" />  
                                            <f:selectItem itemLabel="7 Meses" itemValue="7" />  
                                            <f:selectItem itemLabel="8 Meses" itemValue="8" />  
                                            <f:selectItem itemLabel="9 Meses" itemValue="9" />  
                                            <f:selectItem itemLabel="10 Meses" itemValue="10" />  
                                            <f:selectItem itemLabel="11 Meses" itemValue="11" />  
                                            <f:selectItem itemLabel="12 Meses" itemValue="12" />
                                            <f:selectItem itemLabel="Indefinida" itemValue="13" />
                                        </p:selectOneMenu>

                                        <h:outputText value="Pregunta Seguridad: " />  
                                        <p:selectOneMenu value="#{estudianteWizardController.usuario.usrPreguntaSeguridad}" label="Pregunta Seguridad">  
                                            <f:selectItem itemLabel="Cual es tu color favorito?" itemValue="Cual es tu color favorito?" />  
                                            <f:selectItem itemLabel="Donde nacio tu madre?" itemValue="Donde nacio tu madre?" />  
                                            <f:selectItem itemLabel="Donde nacio tu padre?" itemValue="Donde nacio tu padre?" />  
                                            <f:selectItem itemLabel="Numero de id carnet universidad?" itemValue="Numero de id carnet universidad?" />
                                            <f:selectItem itemLabel="Como se llamo tu primera mascota?" itemValue="Como se llamo tu primera mascota?" />
                                        </p:selectOneMenu>

                                        <h:outputText value="Respuesta:* " />
                                        <p:inputText id="respuesta_psec" value="#{estudianteWizardController.usuario.usrRespuestaPreguntaSeguridad}" label="Respuesta" required="true" />
                                    </h:panelGrid>
                                </p:fieldset>
                            </p:panel>
                        </p:tab>
                        <p:tab id="personal" title="Personal">
                            <p:panel header="Detalles Personales">

                                <h:messages errorClass="error"/>

                                <h:panelGrid columns="4" columnClasses="label, value" styleClass="grid">
                                    <h:outputLabel for="primer_nombre" value="Primer Nombre: *" />
                                    <p:inputText id="primer_nombre" label="Primer Nombre" value="#{estudianteWizardController.estudiante.estPrimerNombre}" required="true" />

                                    <h:outputLabel for="segundo_nombre" value="Segundo Nombre: " />
                                    <p:inputText id="segundo_nombre" label="Segundo Nombre" value="#{estudianteWizardController.estudiante.estSegundoNombre}" required="false"/>

                                    <h:outputLabel for="primer_apellido" value="Primer Apellido: *" />
                                    <p:inputText id="primer_apellido" label="Primer Apellido" value="#{estudianteWizardController.estudiante.estPrimerApellido}" required="true" />

                                    <h:outputLabel for="segundo_apellido" value="Segundo Apellido: *" />
                                    <p:inputText id="segundo_apellido" label="Segundo Apellido" value="#{estudianteWizardController.estudiante.estSegundoApellido}" required="false" />

                                    <h:outputLabel for="apodo" value="Apodo: " />  
                                    <p:inputText id="apodo" label="Apodo" value="#{estudianteWizardController.estudiante.estApodo}" required="false" />

                                    <h:outputLabel for="sexo" value="Sexo: *" />  
                                    <p:selectOneMenu id="sexo" label="Sexo" value="#{estudianteWizardController.estudiante.estGenero}">  
                                        <f:selectItem itemLabel="Masculino" itemValue="m" />  
                                        <f:selectItem itemLabel="Femenino" itemValue="f" />  
                                    </p:selectOneMenu>

                                    <h:outputLabel for="dni" value="Identificacion: *" />  
                                    <h:panelGrid columns="3">
                                        <p:inputText id="dni" label="DNI" value="#{estudianteWizardController.estudiante.estDni}" required="true" />
                                        <h:outputLabel for="tipoDoc" value="&nbsp;&nbsp;&nbsp;Tipo: " />  
                                        <p:selectOneMenu id="tipoDoc" value="#{estudianteWizardController.estudiante.estTipoDni}">  
                                            <f:selectItem itemLabel="Cedula" itemValue="cedula" />  
                                            <f:selectItem itemLabel="Pasaporte" itemValue="pasaporte" />  
                                            <f:selectItem itemLabel="Acta de Nacimiento" itemValue="acta de nacimiento" />  
                                        </p:selectOneMenu>
                                    </h:panelGrid>

                                    <h:outputLabel for="nacionalidad" value="Nacionalidad: *" />
                                    <p:inputText id="nacionalidad" label="Nacionalidad" value="#{estudianteWizardController.estudiante.estNacionalidad}" required="false" />

                                    <h:outputLabel for="fecha_nac" value="Fecha Nacimiento: " />
                                    <p:calendar id="fecha_nac" label="Fecha Nacimiento" value="#{estudianteWizardController.estudiante.estFechaNacimiento}" required="true" />

                                    <h:outputLabel for="lugar_nac" value="Lugar de Nacimiento: " />
                                    <p:inputText id="lugar_nac" label="Lugar de Nacimiento" value="#{estudianteWizardController.estudiante.estLugarNacimiento}" required="false" />
                                </h:panelGrid>

                                <h:panelGrid columns="2" columnClasses="label, value">
                                    <h:outputLabel for="direccion" value="Direccion: *" />
                                    <p:inputText id="direccion" label="Direccion" value="#{estudianteWizardController.estudiante.estDireccion}" required="true"  size="60"/>

                                    <h:outputLabel for="telefono" value="Telefono: *" /> 
                                    <p:inputText id="telefono" label="Telefono" value="#{estudianteWizardController.estudiante.estTelefono}" required="true" />
                                </h:panelGrid>
                            </p:panel>
                        </p:tab>
                        <p:tab id="ce" title="Contactos Emergencia">
                            <p:panel header="Manejar Contactos">

                                <h:messages errorClass="error"/>

                                <h:panelGrid columns="1" columnClasses="label, value">

                                    <p:commandButton type="button" value="Agregar Contacto" onclick="new_ce_dlg.show();" />

                                    <p:dataTable var="ce" value="#{estudianteWizardController.contactosEmergencia}" id="ceList" editable="true">
                                        <p:column headerText="Primer Nombre" style="width:125px">
                                            <p:cellEditor>
                                                <f:facet name="output">
                                                    <h:outputText value="#{ce.cemPrimerNombre}" />
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputText value="#{ce.cemPrimerNombre}" style="width:100%"/>
                                                </f:facet>
                                            </p:cellEditor>
                                        </p:column>

                                        <p:column headerText="Segundo Nombre" style="width:125px">
                                            <p:cellEditor>
                                                <f:facet name="output">
                                                    <h:outputText value="#{ce.cemSegundoNombre}" />
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputText value="#{ce.cemSegundoNombre}" style="width:100%"/>
                                                </f:facet>
                                            </p:cellEditor>
                                        </p:column>

                                        <p:column headerText="Primer Apellido" style="width:125px">
                                            <p:cellEditor>
                                                <f:facet name="output">
                                                    <h:outputText value="#{ce.cemPrimerApellido}" />
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputText value="#{ce.cemPrimerApellido}" style="width:100%"/>
                                                </f:facet>
                                            </p:cellEditor>
                                        </p:column>

                                        <p:column headerText="Segundo Apellido" style="width:125px">
                                            <p:cellEditor>
                                                <f:facet name="output">
                                                    <h:outputText value="#{ce.cemSegundoApellido}" />
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputText value="#{ce.cemSegundoApellido}" style="width:100%"/>
                                                </f:facet>
                                            </p:cellEditor>
                                        </p:column>

                                        <p:column headerText="Direccion" style="width:125px">
                                            <p:cellEditor>
                                                <f:facet name="output">
                                                    <h:outputText value="#{ce.cemDireccion}" />
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputText value="#{ce.cemDireccion}" style="width:100%"/>
                                                </f:facet>
                                            </p:cellEditor>
                                        </p:column>

                                        <p:column headerText="Telefono" style="width:125px">
                                            <p:cellEditor>
                                                <f:facet name="output">
                                                    <h:outputText value="#{ce.cemTelefono}" />
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputMask id="ce_telefono" value="#{ce.cemTelefono}" mask="(999) 999-9999" style="width:100%" />
                                                </f:facet>
                                            </p:cellEditor>
                                        </p:column>

                                        <p:column headerText="Parentesco" style="width:125px">
                                            <p:cellEditor>
                                                <f:facet name="output">
                                                    <h:outputText value="#{ce.cemParentesco}" />
                                                </f:facet>
                                                <f:facet name="input">
                                                    <p:inputText value="#{ce.cemParentesco}" style="width:100%"/>
                                                </f:facet>
                                            </p:cellEditor>
                                        </p:column>

                                        <p:column headerText="Opciones" style="width:50px">
                                            <p:rowEditor />
                                        </p:column>
                                    </p:dataTable>
                                </h:panelGrid>

                                <p:dialog id="new_ce_dlg" widgetVar="new_ce_dlg" header="Contactos Emergencia">
                                    <h:form>
                                        <p:growl id="new_ce_growl" sticky="true" showDetail="true"/>
                                        <p:panel header="Nuevo Contacto">
                                            <h:messages errorClass="error"/>

                                            <p:panelGrid columns="2" columnClasses="label, value" styleClass="grid">
                                                <h:outputLabel for="primer_nombre_emer" value="Primer Nombre: *" />
                                                <p:inputText id="primer_nombre_emer" label="Primer Nombre" value="#{estudianteWizardController.currentCE.cemPrimerNombre}" required="true" />

                                                <h:outputLabel for="segundo_nombre_emer" value="Segundo Nombre: " />
                                                <p:inputText id="segundo_nombre_emer" label="Segundo Nombre" value="#{estudianteWizardController.currentCE.cemSegundoNombre}" required="false"/>

                                                <h:outputLabel for="primer_apellido_emer" value="Primer Apellido: *" />
                                                <p:inputText id="primer_apellido_emer" label="Primer Apellido" value="#{estudianteWizardController.currentCE.cemPrimerApellido}" required="true" />

                                                <h:outputLabel for="segundo_apellido_emer" value="Segundo Apellido: *" />
                                                <p:inputText id="segundo_apellido_emer" label="Segundo Apellido" value="#{estudianteWizardController.currentCE.cemSegundoApellido}" required="true" />

                                                <h:outputLabel for="parentesco" value="Parentesco: *" />
                                                <p:inputText id="parentesco" label="Parentesco" value="#{estudianteWizardController.currentCE.cemParentesco}" required="true" />

                                                <h:outputLabel for="direccion_emer" value="Direccion: *" />
                                                <p:inputText id="direccion_emer" label="Direccion" value="#{estudianteWizardController.currentCE.cemDireccion}" required="true"  size="60"/>

                                                <h:outputLabel for="ce_telefono" value="Telefono: *" /> 
                                                <p:inputText id="ce_telefono" label="Telefono" value="#{estudianteWizardController.currentCE.cemTelefono}" required="true" />
<!--                                                <p:inputMask id="ce_telefono" label="Telefono" value="#{estudianteWizardController.currentCE.cemTelefono}" mask="(999) 999-9999" required="true" />s-->
                                            </p:panelGrid>
                                            <f:facet name="footer">
                                                <p:commandButton value="Guardar" icon="ui-icon-check" update="new_ce_growl" oncomplete="new_ce_dlg.hide();" />
                                                <p:spacer width="10" />
                                                <p:commandButton value="Cancelar" icon="ui-icon-cancel" onclick="new_ce_dlg.hide();" />
                                            </f:facet>
                                        </p:panel>
                                    </h:form>
                                </p:dialog>
                            </p:panel>
                        </p:tab>

                        <p:tab id="confirm" title="Confirmacion">
                            <p:panel header="Confirmacion">
                                <p:fieldset legend="Cuenta de Usuario">
                                </p:fieldset>

                                <p:spacer height="10" />

                                <p:fieldset legend="Informacion Personal">
                                    <h:panelGrid id="confirmation" columns="6">
                                        <h:outputText value="Primer Nombre: " />
                                        <h:outputText styleClass="outputLabel" value="#{estudianteWizardController.estudiante.estPrimerNombre}" />

                                        <h:outputText value="Segundo Nombre: " />
                                        <h:outputText styleClass="outputLabel" value="#{estudianteWizardController.estudiante.estSegundoNombre}" />

                                        <h:outputText value="Primer Apellido: " />
                                        <h:outputText styleClass="outputLabel" value="#{estudianteWizardController.estudiante.estPrimerApellido}" />

                                        <h:outputText value="Segundo Apellido: " />
                                        <h:outputText styleClass="outputLabel" value="#{estudianteWizardController.estudiante.estSegundoApellido}" />

                                        <h:outputText value="Apodo: " />
                                        <h:outputText styleClass="outputLabel" value="#{estudianteWizardController.estudiante.estApodo}" />

                                        <h:outputText value="Sexo: " />
                                        <h:outputText styleClass="outputLabel" value="#{estudianteWizardController.estudiante.estGenero}" />

                                        <h:outputText value="Identificacion: " />
                                        <h:outputText styleClass="outputLabel" value="#{estudianteWizardController.estudiante.estDni}" />

                                        <h:outputText value="Tipo Documento: " />
                                        <h:outputText styleClass="outputLabel" value="#{estudianteWizardController.estudiante.estTipoDni}" />

                                        <h:outputText value="Nacionalidad: " />
                                        <h:outputText styleClass="outputLabel" value="#{estudianteWizardController.estudiante.estNacionalidad}" />

                                        <h:outputText value="Fecha Nacimiento: " />
                                        <h:outputText styleClass="outputLabel" value="#{estudianteWizardController.estudiante.estFechaNacimiento}" />

                                        <h:outputText value="Lugar de Nacimiento: " />
                                        <h:outputText styleClass="outputLabel" value="#{estudianteWizardController.estudiante.estLugarNacimiento}" />

                                        <h:outputText value="Direccion: " />
                                        <h:outputText styleClass="outputLabel" value="#{estudianteWizardController.estudiante.estDireccion}" />

                                        <h:outputText value="Telefono: " />
                                        <h:outputText styleClass="outputLabel" value="#{estudianteWizardController.estudiante.estTelefono}" />

                                        <h:outputText value="Email: " />
                                        <h:outputText styleClass="outputLabel" value="#{estudianteWizardController.estudiante.estEmail}" />

                                        <h:outputText />

                                    </h:panelGrid>
                                </p:fieldset>

                                <p:spacer height="10" />

                                <p:fieldset legend="Contactos Emergencia">
                                    <p:dataTable var="ce" value="#{estudianteWizardController.contactosEmergencia}" id="co_ceList">
                                        <p:column>
                                            <f:facet name="header">
                                                <h:outputText value="Nombres" />
                                            </f:facet>
                                            <h:outputText value="#{ce.cemPrimerNombre} #{ce.cemSegundoNombre}" />
                                        </p:column>
                                        <p:column>
                                            <f:facet name="header">
                                                <h:outputText value="Apellidos" />
                                            </f:facet>
                                            <h:outputText value="#{ce.cemPrimerApellido} #{ce.cemSegundoApellido}" />
                                        </p:column>
                                        <p:column>
                                            <f:facet name="header">
                                                <h:outputText value="Parentesco" />
                                            </f:facet>
                                            <h:outputText value="#{ce.cemParentesco}" />
                                        </p:column>
                                        <p:column>
                                            <f:facet name="header">
                                                <h:outputText value="Direccion" />
                                            </f:facet>
                                            <h:outputText value="#{ce.cemDireccion}" />
                                        </p:column>
                                        <p:column>
                                            <f:facet name="header">
                                                <h:outputText value="Telefono" />
                                            </f:facet>
                                            <h:outputText value="#{ce.cemTelefono}" />
                                        </p:column>
                                    </p:dataTable>
                                </p:fieldset>
                                <p:commandButton value="Aceptar" update="growl" action="#{estudianteWizardController.save}"/>
                                <p:spacer width="10" />
                                <p:commandButton value="Cancelar" update="growl" action="#{estudianteWizardController.cancelEstudiantePersistation}"/>
                            </p:panel>
                        </p:tab>
                    </p:wizard>
                </h:form>
            </ui:define>
        </ui:composition>
    </body>
</html>
